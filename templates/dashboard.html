<!DOCTYPE html>
<html><head><title>智管仪表板</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
</head><body>
<!-- 顶部栏 -->
<nav class="navbar navbar-expand-lg">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">智管</a>
    <div class="navbar-nav ms-auto">
      <a class="nav-link" href="/logout">退出</a>
    </div>
  </div>
</nav>

<!-- 左侧侧边栏 -->
<div class="sidebar d-none d-lg-block">
  <ul>
    <li><a href="/smart_quote">智能报价</a></li>
    <li><a href="/order">订单管理</a></li>
    <li><a href="/inventory">库存管理</a></li>
    <li><a href="/pivot">透视报表</a></li>
    <li><a href="/settings">系统设置</a></li>
  </ul>
</div>

<!-- 主内容 -->
<div class="container-fluid mt-3" style="margin-left: 250px; padding: 20px;">
  <h2>欢迎，管理员！</h2>
  <div class="row">
    <!-- 卡片模块 -->
    <div class="col-md-3">
      <div class="card">
        <div class="card-header">智能报价</div>
        <div class="card-body">
          <p>筛选&管理中标价格。</p>
          <a href="/smart_quote" class="btn btn-primary">开始</a>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card">
        <div class="card-header">订单管理</div>
        <div class="card-body">
          <p>销售/采购订单列表。</p>
          <a href="/order" class="btn btn-primary">查看</a>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card">
        <div class="card-header">库存查询</div>
        <div class="card-body">
          <p>按仓库/类别检索。</p>
          <a href="/inventory" class="btn btn-primary">管理</a>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card">
        <div class="card-header">报表中心</div>
        <div class="card-body">
          <p>透视表&导出。</p>
          <a href="/pivot" class="btn btn-primary">生成</a>
        </div>
      </div>
    </div>
  </div>

  <!-- 产品检索 -->
  <div class="row mt-4">
    <div class="col-12">
      <input type="text" id="search" placeholder="全局产品检索..." class="form-control">
      <div id="results" class="mt-2"></div>
    </div>
  </div>

  <h3>仪表板</h3>
  <div class="row">
    <div class="col-md-4">
      <div class="card p-3 mb-3">
        <h5>报价数</h5>
        <p class="fs-4">{{ quotes }}</p>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card p-3 mb-3">
        <h5>订单数</h5>
        <p class="fs-4">{{ orders }}</p>
      </div>
    </div>
  </div>
</div>

<script>
document.getElementById('search').oninput = function() {
  fetch('/api/products?q=' + this.value).then(r => r.json()).then(data => {
    document.getElementById('results').innerHTML = data.map(p => `<div class="alert alert-info">${p.name} (ID: ${p.id})</div>`).join('');
  });
};
</script>
</body></html>