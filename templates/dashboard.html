{% extends "includes/base_with_sidebar.html" %}

<!-- 忽略 VS Code JavaScript 验证 -->
<!-- eslint-disable -->

{% block title %}首页 - 智管系统{% endblock %}

{% block head %}
<style>
    .stat-card {
        padding: 30px;
        text-align: center;
        transition: transform 0.2s;
        cursor: pointer;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        margin-bottom: 20px;
    }
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }
    .stat-icon {
        font-size: 48px;
        margin-bottom: 15px;
    }
    .stat-number {
        font-size: 36px;
        font-weight: bold;
        margin-bottom: 10px;
    }
    .stat-label {
        font-size: 16px;
        color: #666;
    }
    .icon-blue { color: #4472C4; }
    .icon-green { color: #70AD47; }
    .icon-orange { color: #FFC000; }
    .icon-red { color: #ED7D31; }
    .icon-purple { color: #9966FF; }
    .icon-teal { color: #20B2AA; }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <h2 class="mb-4">
        <i class="fas fa-home"></i> 系统概览
    </h2>

    <!-- 统计卡片 -->
    <div class="row">
        <!-- 客户统计 -->
        <div class="col-md-4">
            <div class="stat-card" onclick="location.href='{{ url_for('customers_page') }}'">
                <div class="stat-icon icon-blue">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-number">{{ stats.customers_count|default(0) }}</div>
                <div class="stat-label">客户总数</div>
            </div>
        </div>

        <!-- 供应商统计 -->
        <div class="col-md-4">
            <div class="stat-card" onclick="location.href='{{ url_for('suppliers_page') }}'">
                <div class="stat-icon icon-green">
                    <i class="fas fa-truck"></i>
                </div>
                <div class="stat-number">{{ stats.suppliers_count|default(0) }}</div>
                <div class="stat-label">供应商总数</div>
            </div>
        </div>

        <!-- 智能报价统计 -->
        <div class="col-md-4">
            <div class="stat-card" onclick="location.href='{{ url_for('smart_quote') }}'">
                <div class="stat-icon icon-orange">
                    <i class="fas fa-calculator"></i>
                </div>
                <div class="stat-number">{{ stats.quotes_count|default(0) }}</div>
                <div class="stat-label">智能报价记录</div>
            </div>
        </div>

        <!-- 销售订单统计 -->
        <div class="col-md-4">
            <div class="stat-card" onclick="location.href='{{ url_for('sales_orders_page') }}'">
                <div class="stat-icon icon-red">
                    <i class="fas fa-file-invoice-dollar"></i>
                </div>
                <div class="stat-number">{{ stats.sales_orders_count|default(0) }}</div>
                <div class="stat-label">销售订单</div>
            </div>
        </div>

        <!-- 采购订单统计 -->
        <div class="col-md-4">
            <div class="stat-card" onclick="location.href='{{ url_for('purchase_orders_page') }}'">
                <div class="stat-icon icon-purple">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="stat-number">{{ stats.purchase_orders_count|default(0) }}</div>
                <div class="stat-label">采购订单</div>
            </div>
        </div>

        <!-- 计算分析 -->
        <div class="col-md-4">
            <div class="stat-card" onclick="location.href='/calculation'">
                <div class="stat-icon icon-teal">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-number">
                    <i class="fas fa-arrow-right"></i>
                </div>
                <div class="stat-label">计算分析</div>
            </div>
        </div>
    </div>

    <!-- 快捷操作 -->
    <div class="card mt-4">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">
                <i class="fas fa-bolt"></i> 快捷操作
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-3">
                    <a href="{{ url_for('customers_page') }}" class="btn btn-primary w-100 mb-3">
                        <i class="fas fa-plus-circle"></i> 新增客户
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="{{ url_for('suppliers_page') }}" class="btn btn-success w-100 mb-3">
                        <i class="fas fa-plus-circle"></i> 新增供应商
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="{{ url_for('sales_orders_page') }}" class="btn btn-info w-100 mb-3">
                        <i class="fas fa-plus-circle"></i> 新增销售订单
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="{{ url_for('smart_quote_bulk') }}" class="btn btn-warning w-100 mb-3">
                        <i class="fas fa-upload"></i> 批量导入报价
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- 系统信息 -->
    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h6 class="mb-0"><i class="fas fa-info-circle"></i> 系统信息</h6>
                </div>
                <div class="card-body">
                    <table class="table table-sm">
                        <tr>
                            <td><strong>系统名称</strong></td>
                            <td>智管系统</td>
                        </tr>
                        <tr>
                            <td><strong>版本</strong></td>
                            <td>v2.0</td>
                        </tr>
                        <tr>
                            <td><strong>当前用户</strong></td>
                            <td>{{ session.get('user', 'Guest') }}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h6 class="mb-0"><i class="fas fa-question-circle"></i> 快速帮助</h6>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="fas fa-check-circle text-success"></i> 
                            <a href="{{ url_for('customers_page') }}">管理客户信息</a>
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-check-circle text-success"></i> 
                            <a href="{{ url_for('smart_quote') }}">查看智能报价</a>
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-check-circle text-success"></i> 
                            <a href="{{ url_for('sales_orders_page') }}">创建销售订单</a>
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-check-circle text-success"></i> 
                            <a href="{{ url_for('settings') }}">系统设置</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}